# Cookies

之前一直没有重视这个东西，知道今天面试才暴露了出来。尽量的深挖一些知识。

## 什么是Cookies

cookies 的类型为“小型文本文件”，指某些网站为了辨别用户身份而储存在用户本地终端上的数据（通常经过加密）。

我们总结几个关键的词：辨别用户身份、数据加密。

我们下面就从这两个方向看一下Cookies。

## 辨别用户身份

辨别用户身份也可以说是Cookies的用途了。http为无状态的，服务器无法了解用户上一次的操作，举个例子，买东西，京东上买了点吃喝，结账的时候发现，HTTP的无状态性，若不通过额外的手段，服务器并不知道用户到底买了什么，而Coookie就是解决HTTP的无状态性的方式之一。

服务器可以*设置*或*读取*Cookies中包含信息，借此维护用户跟服务器会话中的状态。

第一次创建会话的时候，服务端会发送给客户端Cookie，里面记录一个ID用于识别客户端身份，以后每次请求把这个会话ID发送到服务器，我就知道你是谁了。

举个最常用的例子：用户登陆，网站往往会通过用户输入用户名和密码，并且用户可以勾选“下次自动登录”。如果勾选了，那么下次访问同一网站时，用户会发现没输入用户名和密码就已经登录了。

这正是因为前一次登录时，服务器发送了包含登录凭据（用户名加密码的某种加密形式）的Cookie到用户的硬盘上。第二次登录时，如果该Cookie尚未到期，浏览器会发送该Cookie，服务器验证凭据，于是不必输入用户名和密码就让用户登录了。

## Cookies的属性

* Expires：属性指定一个具体的到期时间
* Max-Age：属性指定从现在开始 Cookie 存在的秒数
* Domain：属性指定浏览器发出 HTTP 请求时，哪些域名要附带这个 Cookie
* Path：属性指定浏览器发出 HTTP 请求时，哪些路径要附带这个 Cookie。
* Secure：属性指定浏览器只有在加密协议 HTTPS 下，才能将这个 Cookie 发送到服务器。
* HttpOnly：属性指定该 Cookie 无法通过 JavaScript 脚本拿到。


我们可以使用document.cookie去设置属性的字符串，如果与之前的名字相同，则会替代同名cookies。

## 总结

Cookies在现代web开发中是客户端存储数据的手段之一。其他包括localStrage和sessionStrage等存储手段我们以后再说。