# 函数

es6对函数更新了函数特性，在es5的基础上进行了很多改进，比以前更加灵活易于使用，也减少编程过程中的出错

### 默认参数

js中的函数定义时声明了多少形参，都可以传入任意数量的参数。我们在定义形参无对应的参数传入时为其指定一个默认参数。

在es5中：

```
function num(a, b) {
  a = a || 6;
  b = b || 1;
  console.log(a + b);
}
num(1, 2);  //3
```

在es6中我们可以使用新的默认值写法:

```
function num(a = 6, b = 1) {
  console.log(a + b);
}
num(1,2); //3
```

可以为任意参数指定默认值，可以在添加默认值的参数后继续添加无默认值的参数，而添加默认值的参数只有当不传值或者传入undefined时才会使用默认参数。

使用默认参数会让函数体更小，函数内部代码更加简洁。

##### 默认参数对arguments的影响

arguments是一个类数组的对象，用于在函数体内部读取所有参数。

在正常模式下，arguments对象可以在运行时修改。

```
function num(a, b) {
  a = 4;
  console.log(a + b);
}
num(1,3);   //7
```
在严格模式下，arguments对象与函数参数没有联动关系，修改arguments对象是不会影响到函数参数的。

```
function num(a, b) {
  'use strict';
  a = 4;
  console.log(a + b);
}
num(1,3);   //4
```
在es6中，无论是否定义了严格模式，arguments对象的行为都与es5中的严格模式是同样的标准。也就是说参数如何变化，arguments都不会改变。

##### 默认参数表达式

默认参数，不仅可以设置成一个数值、字符串、数组等，还可以设置为一个函数。

```
function c(){
  return 5;
}
function num(a, b = c()) {
  console.log(a + b);
}
num(1); //6
```
参数b的默认值是函数c，如果没有传入第二个参数，就会调用c()函数来得到默认值。初次解析函数声明时不会调用c()，只有第二个参数没有传入的时候才会调用默认参数c()函数。

##### 默认参数临死区

let和count是有临死区的，而默认参数也同样有临死区。

```
function num(a = b, b) {
  console.log(a + b);
}
num(1,1);   //报错
```
因为a初始化的时候，b没有进行初始化。所以会导致错误。

### 无命名参数

当传入的参数是一个对象，不是一个具体的参数名，则是无命名参数。

```
let obj= {
  a:1,
  b:2
}
function num(object) {
  console.log(object.a + object.b);
}
num(obj);   //3
```

##### 不定参数

在函数的命名参数前添加三个点（...）就表明这是一个不定参数，该参数为一个数组，包含着自它之后传入的所有参数。

```
function num(...arr) {
  console.log(a + b);
}
let a = 1,
    b = 2;
num(1, 2);  //3
```
不定参数是有两条使用限制的，我们使用的时候应该注意避免不正确的使用：1.每个函数只能声明一个不定参数，而且必须放置在所有参数的末尾。2.不定参数不能用于对象字面量setter中。

##### 展开运算符

展开运算符的作用是解构数组，将数组的元素作为独立的参数传入函数。

```
let arr = [1,2,3,4,5];
console.log(Math.max(...arr));  //5
```
***展开运算符可以简化使用数组给函数传参的编码过程。***

### 箭头函数

es6中，箭头函数是让我们感受最大的特性。箭头函数的设计目标是用来替代匿名函数表达式的。

箭头函数和普通函数的不同主要集中在以下：

1. 没有this、super、arguments和new.target绑定。
2. 不能通过new关键字调用。
3. 没有原型。
4. 不可以改变this绑定。
5. 不支持重复命名参数
6. 不支持arguments对象。

##### 箭头函数的定义：

```
let sum = (num1,num2) => num1 + num2;
```
##### 箭头函数没有this绑定

使用箭头函数可以避免因为this绑定而出现的错误，因为正常函数内的this都是根据调用的上下文而改变。
但是箭头函数中没有this绑定，this必须通过查找作用域链来决定this的值。

##### 立即调用箭头函数

```
const num = ((a) => {
  return {
    getA() {
      console.log(a)
    }
  }
})(18)
num.getA() // 18
```

##### 箭头函数和数组

而箭头函数是非常适合处理数组的，可以通过箭头函数语法简化编码过程。

```
count arr = [10, 50, 30, 40, 20]
const s = arr.sort((a, b) => a - b)
console.log(s) // [10,20,30,40,50]
```

### 总结
  
1.总的来说es6中的函数除了改进了一些语法外没有太大的变化，但是变的更加易用了。

2.可以为函数参数定义默认值，更加易读。

3.为函数定义不定参数，可以比arguments对象更加灵活的方式。

4.展开运算符可以解构数组并将每一个数组元素作为函数独立的参数使用。

5.es6中最大的改变就是箭头函数，箭头函数用来替代匿名函数表达式，有更加简介的语法。


