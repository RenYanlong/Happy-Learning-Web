# 类

javascript是不支持类和继承的特性的。在ES6中引入了类的特性，但ES6中的类与其他面向对象的语言还是不太一样。

### 类的声明

与其他语言一样，我们需要先声明一个类。

##### 声明类的语法

使用class关键字声明一个类。

```
class Proson {
  constructor(name) {
    this.name = name;
  }
  say() {
    console.log()
  }
}
```

这里我们要知道，类只是基于原型的语法糖。上面的例子中say() 函数是Preson.prototype上的方法。只是通过语法糖包装以后，类就可以替代自定义类型的功能。

##### 类与自定义类型之间的差异

1. 类声明不会被提升，而自定义函数会提升
2. 类声明强制执行严格模式
3. 类声明所有方法都不可枚举，而自定义类型则可以通过Object.definePrototype()方法手工指定不可枚举属性。
4. 每个类都有一个[[construct]]的方法
5. 类声明只能使用new关键字调用
6. 不能在类中修改类名。

### 类表达式

类和函数都有两种存在形式：声明形式和表达式形式。

```
//声明形式
class Proson {
  constructor() { }
}
//匿名表达式
let Preson = class {
  constructor() { }
}
//表达式形式
let Preson = class Preson1 {
  constructor() { }
}
```

类声明和类表达式只是编写形式上有差别，所以无论选择哪种编写方式都不会影响执行结果。

### 一等公民类

js中函数是一等公民，而类也被设计成一等公民。

##### 将类作为参数传递给函数

```
class Preson {
  say() {
    return 'hi';
  }
}
function newPreson(preson) {
  return new preson;
}

let pre = newPreson(Preson);
console.log(pre.say());
```

##### 通过类构造函数创建单例


```
let preson = new class {
  constructor(name) {
    this.name = name
  }
  sayName() {
    console.log(this.name);
  }
}('eryue')
preson.sayName(); // eryue

```

### 访问器属性

类允许直接在原型上定义访问器属性

```
class Preson {
  constructor(state) {
    this.state = state
  }
  // 创建getter
  get myName() {
    return this.state.name
  }
  // 创建setter
  set myName(name) {
    this.state.name = name
  }
}
let desriptor = Object.getOwnPropertyDescriptor(Preson.prototype, "myName")
console.log("get" in desriptor) // true
console.log(desriptor.enumerable) // false
```

### 可计算成员名称

类方法与函数相似，可以使用可计算属性。

```
let sayname = 'say';
class Preson {
  constructor(name) {
    this.name = name;
  }
  [sayname](){
    console.log(this.name)
  }
}
let xiaoming = new Preson('xiaoming');
xiaoming.say(); //xiaoming
```

### 静态成员

静态成员在所有方法和访问器属性使用static关键字。static修饰的方法不能在实例中访问，只能在类中直接访问。

```
class Preson {
  constructor(name) {
    this.name = name;
  }
  static create(name){
    return new Preson(name)
  }
}
let xiaoming = Preson.create('xiaoming')
console.log(xiaoming.name); //xiaoming
```


