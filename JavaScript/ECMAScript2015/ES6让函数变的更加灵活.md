# ES6让函数变的更加灵活

#### 从前我们怎么做

在ES5中，我们需要通过额外的代码来执行设置默认参数这种基本操作。

#### 现在我们怎么做

###### 默认参数

在es6中我们可以使用一种更加简化的形式为参数提供默认值。

```
function num(sex, age = 18) {
  //具体操作
}
```
这样的写法，只有第一个参数被认为是必须传递的，而第二个参数有默认值，当第二个参数undefinde的时候才会使用age的默认值。

###### 默认参数对arguments的影响

当使用默认参数时，arguments对象的行为与以往有所不同。

在正常模式下，arguments对象可以在运行时修改。

```
function num(a, b) {
  a = 4;
  console.log(a + b);
}
num(1,3);   //7
```
在严格模式下，arguments对象与函数参数没有联动关系，修改arguments对象是不会影响到函数参数的。

```
function num(a, b) {
  'use strict';
  a = 4;
  console.log(a + b);
}
num(1,3);   //4
```
设置了默认参数后，arguments对象的行为都与ES5中的严格模式是同样的标准。也就是说参数如何变化，arguments都不会改变。

###### 默认参数表达式

**默认参数**不仅可以设置成数值、字符串、数组等，还可以设置为函数。

```
function c(){
  return 5;
}
function num(a, b = c()) {
  console.log(a + b);
}
num(1); //6
```

默认参数表达式时惰性的，只有在相对应的参数传入为undefinde的时候，才会执行函数。

而在设置默认参数时，应该注意到**默认参数临死区**的问题

```
function num(a = b, b) {
  console.log(a + b);
}
num(1,1);   //报错
```

因为a初始化的时候，b没有进行初始化。所以会导致错误。

###### 无命名参数

当传入的参数是一个对象，不是一个具体的参数名，则是无命名参数。

```
let person= {
  name:'huahua',
  age:12
}
function getData(object) {
  console.log(object.name,object.age);
}
getData(person);   //'huahua',12
```

###### 不定参数

在函数的命名参数前添加三个点（...）就表明这是一个不定参数，该参数为一个数组，包含着自它之后传入的所有参数。

```
function num(...arr) {
  console.log(a + b);
}
let a = 1,
    b = 2;
num(1, 2);  //3
```
不定参数是有两条使用限制的，我们使用的时候应该注意避免不正确的使用：

1. 每个函数只能声明一个不定参数，而且必须放置在所有参数的末尾。
2. 不定参数不能用于对象字面量setter中。

###### 展开运算符

展开运算符的作用是解构数组，将数组的元素作为独立的参数传入函数。

```
let arr = [1,2,3,4,5];
console.log(Math.max(...arr));  //5
```
***展开运算符可以简化使用数组给函数传参的编码过程。***

#### 箭头函数

ES6中的函数，箭头函数是让我们感受最大的特性。箭头函数的设计目标是**用来替代匿名函数表达式**。

箭头函数和普通函数的不同主要集中在以下：

1. 没有this、super、arguments和new.target绑定。
2. 不能通过new关键字调用。
3. 没有原型。
4. 不可以改变this绑定。
5. 不支持重复命名参数
6. 不支持arguments对象。

###### 箭头函数的定义：

```
let sum = (num1,num2) => num1 + num2;
```
###### 箭头函数没有this绑定

使用箭头函数可以避免因为this绑定而出现的错误，因为正常函数内的this都是根据调用的上下文而改变。
但是箭头函数中没有this绑定，this必须通过查找作用域链来决定this的值。

###### 立即调用箭头函数

```
const num = ((a) => {
  return {
    getA() {
      console.log(a)
    }
  }
})(18)
num.getA() // 18
```

###### 箭头函数和数组

而箭头函数是非常适合处理数组的，可以通过箭头函数语法简化编码过程。

```
count arr = [10, 50, 30, 40, 20]
const s = arr.sort((a, b) => a - b)
console.log(s) // [10,20,30,40,50]
```

##### 总结
  
总的来说es6中的函数除了改进了一些语法外没有太大的变化，但是应该牢记下面几点：

1.可以为函数参数定义默认值。

2.为函数定义不定参数，可以比arguments对象更加灵活的方式。

3.展开运算符可以解构数组并将每一个数组元素作为函数独立的参数使用。

4.ES6中最大的改变就是箭头函数，箭头函数用来替代匿名函数表达式，有更加简介的语法。

###### 链接

[函数——MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions)


